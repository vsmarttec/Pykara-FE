

<nav id="site-header" class="site-header relative" [class.scrolled]="isScrolled" (click)="stopPropagation($event)">

  <div class="mx-auto max-w-7xl px-4">
    <div class="relative flex h-16 items-center justify-between">

      <!-- Logo -->
      <div class="flex flex-1 justify-start m-3">
        <a routerLink="/" (click)="closeAll()">
          <img src="/assets/py-logo.png" class="h-10 w-auto" />
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <div class="absolute inset-y-0 right-0 flex items-center sm:hidden">
        <button (click)="toggleMobileMenu($event)"
          class="p-2 h-10 w-10 rounded bg-black/10 text-white flex items-center justify-center">
          <span class="text-lg">â˜°</span>
        </button>
      </div>

      <!-- Desktop Menu -->
      <div class="hidden sm:block">
        <ul class="flex gap-6 items-center">

          <!-- Normal Items -->
          <li *ngFor="let nav of Navitems">

            <!-- AI DROPDOWN -->
            <div *ngIf="nav.hasDropdown" class="relative">
              <button (click)="toggleAiDropdown($event)" [class.active-nav-item]="nav.isActive"
                class="flex items-center text-[15px] font-medium text-[#355c7d] hover:text-black gap-1 px-2 py-1 transition-colors duration-200">
                {{ nav.name }}
                <svg class="w-3 h-3 transition-transform duration-200" [class.rotate-180]="isAiDropdownOpen" fill="none"
                  stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </button>

              <div *ngIf="isAiDropdownOpen"
                class="absolute left-0 mt-2 w-64 bg-white rounded-lg shadow-xl py-2 z-50 border border-gray-100">

                <!-- AI Solution -->
                <a routerLink="/ai-solution" [class.active-dropdown-item]="isRouteActive('/ai-solution')"
                  (click)="navigateTo('/ai-solution', $event)"
                  class="flex items-center px-4 py-2.5 text-sm text-[#355c7d] hover:bg-[#155dfc] hover:text-white transition-colors duration-200">
                  AI Solution
                </a>

                <!-- ALL POC -->
                <button (click)="togglePocDropdown($event)"
                  [class.active-dropdown-item-poc]="nav.dropdownItems?.[1]?.isActive"
                  class="flex items-center justify-between cursor-pointer w-full text-left px-4 py-2.5 text-sm text-[#355c7d] hover:bg-[#155dfc] hover:text-white rounded transition-colors duration-200">
                  <span>ALL POC</span>
                  <svg class="w-3 h-3 transition-transform duration-200" [class.rotate-180]="allPoc" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                  </svg>
                </button>

                <!-- POC CHILDREN -->
                <div *ngIf="allPoc" class="ml-6 mt-1 pl-3 border-l border-gray-200 animate-slide-in">
                  <a *ngFor="let child of nav.dropdownItems?.[1]?.children || []" [href]="child.href"
                    [class.active-dropdown-child]="child.isActive"
                    class="block px-3 py-2 text-xs text-gray-600 hover:text-white hover:bg-[#155dfc] rounded transition-colors duration-200">
                    {{ child.name }}
                  </a>
                </div>

              </div>
            </div>

            <!-- NON DROPDOWN -->
            <a *ngIf="!nav.hasDropdown && nav.href" [routerLink]="nav.href" [class.active-nav-item]="nav.isActive"
              (click)="navigateTo(nav.href, $event)"
              class="text-[15px] font-medium text-[#355c7d] hover:text-black px-2 py-1 transition-colors duration-200">
              {{ nav.name }}
            </a>

          </li>

          <li>
            <button class="gradient-btns px-4 py-2 rounded" (click)="navigateTo('/contact-us', $event)">
              Contact us
            </button>
          </li>

        </ul>
      </div>
    </div>
  </div>

  <!-- MOBILE MENU -->
  <div *ngIf="isMobileMenuOpen" id="mobile-menu"
    class="sm:hidden absolute top-full left-0 right-0 bg-white shadow-lg rounded-b-lg z-50 border-t border-gray-200"
    (click)="$event.stopPropagation()">

    <ul class="px-4 py-4 space-y-1">

      <li *ngFor="let nav of Navitems">

        <!-- Mobile Dropdown -->
        <div *ngIf="nav.hasDropdown" class="border-b border-gray-100 pb-2">
          <button (click)="toggleAiDropdownMobile($event)" [class.active-nav-item]="nav.isActive"
            class="w-full text-left py-3 text-[#355c7d] font-medium flex justify-between items-center">
            <span>{{ nav.name }}</span>
            <svg class="w-3 h-3 transition-transform duration-200" [class.rotate-180]="isAiDropdownOpenMobile"
              fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>

          <div *ngIf="isAiDropdownOpenMobile" class="ml-4 space-y-2 py-2">

            <a routerLink="/ai-solution" [class.active-dropdown-item]="isRouteActive('/ai-solution')"
              (click)="navigateTo('/ai-solution', $event)"
              class="block py-2 text-sm text-gray-600 hover:text-[#355c7d]">
              AI Solution
            </a>

            <button (click)="togglePocDropdown($event)" [class.active-dropdown-item]="nav.dropdownItems?.[1]?.isActive"
              class="flex justify-between pointer-cusor items-center w-full text-left py-2 text-sm text-gray-600 hover:text-[#355c7d]">
              <span>ALL POC</span>
              <svg class="w-3 h-3 transition-transform duration-200" [class.rotate-180]="allPoc" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </button>

            <div *ngIf="allPoc" class="ml-4 space-y-1">
              <a *ngFor="let child of nav.dropdownItems?.[1]?.children || []" [href]="child.href"
                [class.active-dropdown-child]="child.isActive"
                class="block py-2 text-xs text-gray-500 hover:text-[#355c7d]">
                {{ child.name }}
              </a>
            </div>

          </div>
        </div>

        <!-- Mobile Non-Dropdown -->
        <a *ngIf="!nav.hasDropdown && nav.href" [routerLink]="nav.href" [class.active-nav-item]="nav.isActive"
          (click)="navigateTo(nav.href, $event)" class="block py-3 text-[#355c7d] font-medium border-b border-gray-100">
          {{ nav.name }}
        </a>

      </li>

      <!-- Mobile Contact Button -->
      <li class="pt-2">
        <button class="gradient-btns w-full py-3 rounded text-white font-medium"
          (click)="navigateTo('/contact-us', $event)">
          Contact us
        </button>
      </li>
    </ul>
  </div>
</nav>