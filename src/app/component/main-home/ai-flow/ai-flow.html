<div class="bg-white px-4 sm:px-6 lg:px-10">

    <!-- Header -->
    <div class="text-center mb-10">
        <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-black/80 mb-4">
            Our <span class="gradient-text">Tech Stack</span>
        </h1>
        <p class="text-sm sm:text-base text-black mt-3">
            We choose proven technologies to ensure stability, security, and long-term support.
        </p>
    </div>

    <!-- Main Layout -->
    <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">

        <!-- LEFT : FLOW DIAGRAM -->
        <div class="relative mx-auto w-full
                   h-[420px] sm:h-[520px] lg:h-[650px] xl:h-[700px]
                   overflow-hidden bg-[#0d1523] rounded-2xl shadow-2xl">

            <!-- Background Grid -->
            <div class="absolute inset-0 opacity-10" [style.background-image]="'
                linear-gradient(to right, rgba(56, 189, 248, 0.2) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(56, 189, 248, 0.2) 1px, transparent 1px);'"
                [style.background-size]="'40px 40px'">
            </div>

            <!-- Flow Lines (hidden on mobile) -->
            <svg #flowLines class="absolute inset-0 w-full h-full hidden lg:block" style="z-index:5">
                <path d="M400,350 Q400,250 550,200" fill="none" stroke="url(#grad1)" stroke-width="3"
                    stroke-dasharray="10" class="flow-line" />
                <path d="M400,350 Q400,250 650,300" fill="none" stroke="url(#grad2)" stroke-width="3"
                    stroke-dasharray="10" class="flow-line" />
                <path d="M400,350 Q400,450 550,500" fill="none" stroke="url(#grad3)" stroke-width="3"
                    stroke-dasharray="10" class="flow-line" />
                <path d="M400,350 Q400,250 250,200" fill="none" stroke="url(#grad4)" stroke-width="3"
                    stroke-dasharray="10" class="flow-line" />

                <defs>
                    <linearGradient id="grad1">
                        <stop offset="0%" stop-color="#38bdf8" />
                        <stop offset="100%" stop-color="#0d9488" />
                    </linearGradient>
                    <linearGradient id="grad2">
                        <stop offset="0%" stop-color="#38bdf8" />
                        <stop offset="100%" stop-color="#2563eb" />
                    </linearGradient>
                    <linearGradient id="grad3">
                        <stop offset="0%" stop-color="#38bdf8" />
                        <stop offset="100%" stop-color="#7c3aed" />
                    </linearGradient>
                    <linearGradient id="grad4">
                        <stop offset="0%" stop-color="#38bdf8" />
                        <stop offset="100%" stop-color="#991b1b" />
                    </linearGradient>
                </defs>
            </svg>

            <!-- CENTRAL AI CORE -->
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30
                       cursor-pointer hover:scale-105 transition-transform" (click)="showAllCards()">

                <div class="w-28 h-28 sm:w-32 sm:h-32 lg:w-40 lg:h-40
                           rounded-2xl bg-gradient-to-br from-cyan-900 to-blue-900
                           border-2 border-cyan-500 flex flex-col items-center justify-center shadow-2xl">


                    <i class="fas fa-brain text-cyan-300 text-2xl sm:text-3xl mb-1"></i>
                    <div class="text-center">
                        <div class="font-bold text-white text-sm sm:text-base">AI-FIRST</div>
                        <div class="text-cyan-300 text-xs">CORE</div>
                    </div>
                </div>
            </div>

            <!-- TECH CARDS -->
            <div *ngFor="let card of techCards" class="tech-card" [class.active]="card.active"
                [ngStyle]="card.position">

                <div class="card-shell w-56 sm:w-60 md:w-64
                           p-4 sm:p-5 rounded-xl shadow-2xl floating" [class]="getCardClasses(card)"
                    (click)="activateCard(card.id)">

                    <div class="flex items-center mb-3">
                        <div class="w-9 h-9 rounded-lg flex items-center justify-center mr-3"
                            [class]="getIconBgClass(card)">


                            <lucide-icon [name]="getIconClass(card.icon)" class="text-white"></lucide-icon>
                        </div>
                        <div>
                            <h3 class="font-bold text-white text-sm sm:text-base">
                                {{ card.title }}
                            </h3>
                            <span class="text-xs text-green-400">Active</span>
                        </div>
                    </div>

                    <div class="space-y-2">
                        <div *ngFor="let tech of card.technologies"
                            class="text-xs sm:text-sm p-2 rounded-lg text-white bg-slate-800/70">
                            {{ tech }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RIGHT : LEGEND & DETAILS -->
        <div class="bg-[#0d1523] rounded-2xl border border-slate-800/50
                   p-4 sm:p-6
                   min-h-[420px] sm:min-h-[520px] lg:min-h-[650px] xl:h-[700px]">

            <h3 class="text-center text-white font-bold mb-4">
                AI-FIRST CORE
            </h3>

            <!-- Legend Buttons -->
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6">
                <button class="legend-btn cursor-pointer" (click)="selectSection('aiData')">
                    <span class="dot bg-teal-500"></span> AI & Data
                </button>
                <button class="legend-btn cursor-pointer" (click)="selectSection('webApis')">
                    <span class="dot bg-blue-500"></span> Web & APIs
                </button>
                <button class="legend-btn cursor-pointer" (click)="selectSection('cloudDevops')">
                    <span class="dot bg-purple-500"></span> Cloud & DevOps
                </button>
                <button class="legend-btn cursor-pointer" (click)="selectSection('security')">
                    <span class="dot bg-red-500"></span> Security
                </button>
            </div>

            <!-- Content -->
            <div class="p-4 sm:p-6 bg-slate-900/60 rounded-xl border border-slate-700">
                <ng-container *ngIf="selectedSection">
                    <h2 class="text-lg sm:text-xl lg:text-2xl font-bold mb-4" [ngClass]="{
                            'text-teal-300': selectedSection.color === 'teal',
                            'text-blue-300': selectedSection.color === 'blue',
                            'text-purple-300': selectedSection.color === 'purple',
                            'text-red-300': selectedSection.color === 'red'
                        }">
                        {{ selectedSection.title }}
                    </h2>

                    <p class="text-sm sm:text-base text-white mb-4">
                        {{ selectedSection.description }}
                    </p>

                    <ul class="space-y-3">
                        <li *ngFor="let tech of selectedSection.highlights"
                            class="p-3 rounded-lg bg-slate-800 text-white text-sm">
                            {{ tech }}
                        </li>
                    </ul>
                </ng-container>
            </div>
        </div>

    </div>
</div>